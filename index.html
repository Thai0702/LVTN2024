<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="index.js"></script>
</head>
<body>
    <form>
        <input type="text" id="txtName">
        <input type="button" id="btnCreate" value="Tạo">
        <input type="button" id="btnSend" value="SEND">
    </form>
    <script>
        const soNhom = 2;
        const soThanhVien = 2;
        let DSHS = [];
        // Lấy danh sách sinh viên từ URL API
        fetch(`http://localhost:8080/api/class/${classId}/student-list`)
            .then(response => response.json())
            .then(data => {
                DSHS = data; // Gán dữ liệu sinh viên từ API vào mảng DSHS
                generateRandomGroups(); // Gọi hàm để tạo nhóm ngẫu nhiên sau khi có dữ liệu sinh viên
            })
            .catch(error => console.error('Lỗi khi lấy danh sách sinh viên:', error));

        function getRandomNumber(arrayLength) {
            return Math.floor(Math.random() * arrayLength);
        }

        const groupData = [];
        const memberData = [];

        function generateRandomGroups() {
            for (let y = 0; y < soNhom; y++) {
                let groupName = "Nhóm " + (y + 1); // Fixed the groupName calculation
                let group = { "classId": 2, "groupName": groupName, "leader": 0 }; // Fixed classId value
                groupData.push(group); // Push the group object into groupData array
                for (let x = 0; x < soThanhVien; x++) {
                    let l = DSHS.length;
                    let pos = getRandomNumber(l);
                    let mem = DSHS.splice(pos, 1)[0]; // Fixed pop to splice and accessing the first element
                    let gMem ={"classId":2,"groupName":groupName,"accountId":mem.accountId}
                    memberData.push(gMem); // Push the member object into memberData array
                }
            }

            console.log("Group Data:");
            console.log(JSON.stringify(groupData, null, 2)); // Logging groupData array in JSON format
            console.log("\nMember Data:");
            console.log(JSON.stringify(memberData, null, 2)); // Logging memberData array in JSON format
        }
    </script>
</body>
</html>
